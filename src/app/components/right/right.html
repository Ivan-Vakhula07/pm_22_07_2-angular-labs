<section class="p-4 right bg-white h-100">
  @if (errorMessage()) {
  <div class="alert alert-danger m-3">
    {{ errorMessage() }}
  </div>
  }

  @if (resumeData(); as data) {

  <div class="header mb-4 border-bottom pb-3">
    <h1 class="header_title display-3 fw-bolder">{{ data.personal.name }}</h1>
    <p class="lead text-uppercase text-secondary" style="letter-spacing: 2px;">{{ data.personal.job }}</p>
  </div>

  <div class="aboutme mb-5">
    <div class="d-flex justify-content-between align-items-center cursor-pointer border-bottom mb-3 pb-2" (click)="toggleAbout()">
      <h3 class="text-uppercase fs-4 m-0 fw-bold border-bottom border-primary border-3 pb-1">Про мене</h3>
      <i class="bi fs-4 text-primary" [class.bi-chevron-up]="isAboutOpen()" [class.bi-chevron-down]="!isAboutOpen()"></i>
    </div>

    @if (isAboutOpen()) {
    <div class="row">
      <div class="col-12">
        <p class="aboutme_text">
          {{ data.personal.about }}
        </p>
      </div>
    </div>
    }
  </div>

  <div class="section_container mb-4">
    <div class="d-flex justify-content-between align-items-center cursor-pointer border-bottom mb-3 pb-2" (click)="toggleEducation()">
      <h3 class="text-uppercase fs-4 m-0 fw-bold border-bottom border-primary border-3 pb-1">Освіта</h3>
      <i class="bi fs-4 text-primary" [class.bi-chevron-up]="isEducationOpen()" [class.bi-chevron-down]="!isEducationOpen()"></i>
    </div>
    @if (isEducationOpen()) {
    @for (edu of data.education; track edu.university) {
    <div class="card mb-3 education_full_card">
      <div class="card-body p-3">
        <h5 class="fw-bold mb-1">{{ edu.degree }}</h5>
        <p class="mb-0 small text-secondary">{{ edu.university }} <span class="badge bg-primary">{{ edu.years }}</span></p>
      </div>
    </div>
    }
    }
  </div>

  <div class="section_container mb-4">
    <div class="d-flex justify-content-between align-items-center cursor-pointer border-bottom mb-3 pb-2" (click)="toggleExperience()">
      <h3 class="text-uppercase fs-4 m-0 fw-bold border-bottom border-primary border-3 pb-1">Досвід</h3>
      <i class="bi fs-4 text-primary" [class.bi-chevron-up]="isExperienceOpen()" [class.bi-chevron-down]="!isExperienceOpen()"></i>
    </div>
    @if (isExperienceOpen()) {
    @for (exp of data.experience; track exp.company) {
    <div class="card mb-3 experience_full_card">
      <div class="card-body p-3">
        <h5 class="fw-bold mb-1">{{ exp.role }}</h5>
        <p class="text-success small fw-bold mb-2">{{ exp.years }} {{ exp.company }}</p>
        <p class="mb-0 small text-muted">{{ exp.description }}</p>
      </div>
    </div>
    }
    }
  </div>

  <div class="expertise">
    <h3 class="text-uppercase fs-4 mb-3 border-bottom border-primary border-3 d-inline-block pb-1 fw-bold">Експертиза</h3>
    <div class="row row-cols-2 row-cols-md-4 g-3 text-center mt-2">
      @for (skill of data.skills; track skill.name) {
      <div class="col">
        <div class="circular-progress" [style.--p]="skill.percent + '%'">
          <div class="text-content">
            <strong>{{ skill.name }}</strong><br>{{ skill.percent }}%
          </div>
        </div>
      </div>
      }
    </div>
  </div>

  <div class="mt-5 text-center">
    <button class="btn btn-outline-primary" (click)="saveData()">Оновити дані на сервері</button>
  </div>

  } @else if (!errorMessage()) {
  <div class="text-center mt-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Завантаження...</span>
    </div>
  </div>
  }
</section>
